\hypertarget{namespacego__to__point}{}\doxysection{go\+\_\+to\+\_\+point Namespace Reference}
\label{namespacego__to__point}\index{go\_to\_point@{go\_to\_point}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacego__to__point_a36304a9f313b0579f7fc69fa01695524}{clbk\+\_\+odom}} (msg)
\item 
def \mbox{\hyperlink{namespacego__to__point_a31ee48e5cae36821049b572a96b7c8be}{change\+\_\+state}} (state)
\item 
def \mbox{\hyperlink{namespacego__to__point_ac688bb56fa84763ea2edefc30cae032a}{normalize\+\_\+angle}} (angle)
\item 
def \mbox{\hyperlink{namespacego__to__point_a9c3011a3065fcbefcc1c5ad8c9979669}{fix\+\_\+yaw}} (des\+\_\+pos)
\item 
def \mbox{\hyperlink{namespacego__to__point_ac8579665c0fbf665f734476554fac37d}{go\+\_\+straight\+\_\+ahead}} (des\+\_\+pos)
\item 
def \mbox{\hyperlink{namespacego__to__point_a4a406386ca62830c19c93949e923f7bd}{fix\+\_\+final\+\_\+yaw}} (des\+\_\+yaw)
\item 
def \mbox{\hyperlink{namespacego__to__point_ac2587220a4ac9c845bc9c5b0b45d5835}{done}} ()
\item 
def \mbox{\hyperlink{namespacego__to__point_a2203d17b7e563bee20ed4c988548df45}{go\+\_\+to\+\_\+point}} (goal)
\item 
def \mbox{\hyperlink{namespacego__to__point_abfcc6ba47d138b2b8ee0d51109868803}{slider\+Velocity}} (vel)
\item 
def \mbox{\hyperlink{namespacego__to__point_ab92bd6db1ec323a4d795ed6cb40aebe1}{main}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{namespacego__to__point_a91dbaab25e6080f6b5dbf82cac6ce75c}\label{namespacego__to__point_a91dbaab25e6080f6b5dbf82cac6ce75c}} 
{\bfseries position\+\_\+} = Point()
\item 
\mbox{\Hypertarget{namespacego__to__point_a98ce19d0c843fd1cb438e6630ae107c2}\label{namespacego__to__point_a98ce19d0c843fd1cb438e6630ae107c2}} 
{\bfseries result} = rt2\+\_\+assignment1.\+msg.\+Position\+Result()
\item 
\mbox{\Hypertarget{namespacego__to__point_a777e85f1b4d3c81f9e89a3318257eb22}\label{namespacego__to__point_a777e85f1b4d3c81f9e89a3318257eb22}} 
int {\bfseries lin\+\_\+coef} = 1
\item 
\mbox{\Hypertarget{namespacego__to__point_a333f82df9f091269ae05380c2b6e9877}\label{namespacego__to__point_a333f82df9f091269ae05380c2b6e9877}} 
int {\bfseries ang\+\_\+coef} = 1
\item 
\mbox{\Hypertarget{namespacego__to__point_ae444f19eb2019982432760ace036ce03}\label{namespacego__to__point_ae444f19eb2019982432760ace036ce03}} 
int {\bfseries yaw\+\_\+} = 0
\item 
\mbox{\Hypertarget{namespacego__to__point_aa2d0ef255bcf5d5faf9ca2764730fb17}\label{namespacego__to__point_aa2d0ef255bcf5d5faf9ca2764730fb17}} 
int {\bfseries state\+\_\+} = 0
\item 
\mbox{\Hypertarget{namespacego__to__point_a57b4090d0abcbcf0bfa2bcb9329d3036}\label{namespacego__to__point_a57b4090d0abcbcf0bfa2bcb9329d3036}} 
{\bfseries pub\+\_\+} = None
\item 
\mbox{\Hypertarget{namespacego__to__point_a7315cd3eb4bfee0eb4c2681e9140575e}\label{namespacego__to__point_a7315cd3eb4bfee0eb4c2681e9140575e}} 
{\bfseries velocity} = None
\item 
\mbox{\Hypertarget{namespacego__to__point_a67f95834f0959feb3facd17bc7fa2b38}\label{namespacego__to__point_a67f95834f0959feb3facd17bc7fa2b38}} 
int {\bfseries yaw\+\_\+precision\+\_\+} = math.\+pi / 9
\item 
\mbox{\Hypertarget{namespacego__to__point_af74ccf49164d0478ca8343e2031d5813}\label{namespacego__to__point_af74ccf49164d0478ca8343e2031d5813}} 
int {\bfseries yaw\+\_\+precision\+\_\+2\+\_\+} = math.\+pi / 90
\item 
\mbox{\Hypertarget{namespacego__to__point_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}\label{namespacego__to__point_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}} 
float {\bfseries dist\+\_\+precision\+\_\+} = 0.\+1
\item 
\mbox{\Hypertarget{namespacego__to__point_a524106fc7667a0927951dfd89d52d6a7}\label{namespacego__to__point_a524106fc7667a0927951dfd89d52d6a7}} 
float {\bfseries kp\+\_\+a} = -\/3.\+0
\item 
\mbox{\Hypertarget{namespacego__to__point_a7bc498652ca66932e704e738b50c297b}\label{namespacego__to__point_a7bc498652ca66932e704e738b50c297b}} 
float {\bfseries kp\+\_\+d} = 0.\+2
\item 
\mbox{\Hypertarget{namespacego__to__point_acb4e14986fafe5cb73bb8ad0c178869d}\label{namespacego__to__point_acb4e14986fafe5cb73bb8ad0c178869d}} 
float {\bfseries ub\+\_\+a} = 0.\+6
\item 
\mbox{\Hypertarget{namespacego__to__point_afecad4058844db05d8321199e25b4498}\label{namespacego__to__point_afecad4058844db05d8321199e25b4498}} 
float {\bfseries lb\+\_\+a} = -\/0.\+5
\item 
\mbox{\Hypertarget{namespacego__to__point_a16c473b9e717200c483d18e66b48152a}\label{namespacego__to__point_a16c473b9e717200c483d18e66b48152a}} 
float {\bfseries ub\+\_\+d} = 0.\+6
\item 
\mbox{\Hypertarget{namespacego__to__point_a9af800eec02eb94f70ee4ac6fbea1ecd}\label{namespacego__to__point_a9af800eec02eb94f70ee4ac6fbea1ecd}} 
{\bfseries server} = None
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}.. module:: go_to_point
   :platform: Unix
   :synopsis: Node implementing an aglorhitm to move the robot
    
.. moduleauthor:: Alessio Roda alessioroda98@gmail.com

This node drive the robot to the desired position received

Subscribes to:
    /odom 

Publishes to:
    /cmd_vel 

Client: 
     /set_velocity

Service:
    /go_to_point 

 It's performed as the node that permits the robot to move: it contains all the functions to set the velocity and the orientation of the robot
 based on the target it has to reach via the ActionGoal that was sent from the /state_machine node. In order to do this, when a new target is 
 generated the robot aligns its orienation, then moves to the target with a velocity that is proportional to the velocity set with the sliders
 in the user_interface notebook interface. Once the target is reached, the node sets the target action as succeded, then waits untill a new 
 target is sent.\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacego__to__point_a31ee48e5cae36821049b572a96b7c8be}\label{namespacego__to__point_a31ee48e5cae36821049b572a96b7c8be}} 
\index{go\_to\_point@{go\_to\_point}!change\_state@{change\_state}}
\index{change\_state@{change\_state}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{change\_state()}{change\_state()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+change\+\_\+state (\begin{DoxyParamCaption}\item[{}]{state }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function to change from a state to another in the go_to_point function
Args:
    state(int): int variable for the new state of the FSM\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_a36304a9f313b0579f7fc69fa01695524}\label{namespacego__to__point_a36304a9f313b0579f7fc69fa01695524}} 
\index{go\_to\_point@{go\_to\_point}!clbk\_odom@{clbk\_odom}}
\index{clbk\_odom@{clbk\_odom}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{clbk\_odom()}{clbk\_odom()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+clbk\+\_\+odom (\begin{DoxyParamCaption}\item[{}]{msg }\end{DoxyParamCaption})}

\begin{DoxyVerb}Callback to get the current position of the robot from an /odom message, type Odometry
Args:
    msg: Odometry type message\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_ac2587220a4ac9c845bc9c5b0b45d5835}\label{namespacego__to__point_ac2587220a4ac9c845bc9c5b0b45d5835}} 
\index{go\_to\_point@{go\_to\_point}!done@{done}}
\index{done@{done}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{done()}{done()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+done (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function to call when the target is reached or when it's cancelled, 
it sets to zero the linear and angualar velocity of the robot in order to stop it\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_a4a406386ca62830c19c93949e923f7bd}\label{namespacego__to__point_a4a406386ca62830c19c93949e923f7bd}} 
\index{go\_to\_point@{go\_to\_point}!fix\_final\_yaw@{fix\_final\_yaw}}
\index{fix\_final\_yaw@{fix\_final\_yaw}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{fix\_final\_yaw()}{fix\_final\_yaw()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{des\+\_\+yaw }\end{DoxyParamCaption})}

\begin{DoxyVerb}Once the goal's position is acheived the function orients the robot in order to reach the goal

Args:
    des_yaw(float): the desired yaw\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_a9c3011a3065fcbefcc1c5ad8c9979669}\label{namespacego__to__point_a9c3011a3065fcbefcc1c5ad8c9979669}} 
\index{go\_to\_point@{go\_to\_point}!fix\_yaw@{fix\_yaw}}
\index{fix\_yaw@{fix\_yaw}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{fix\_yaw()}{fix\_yaw()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+fix\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{des\+\_\+pos }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function used to orient the robot respect to the target.
Args:
    des_pos(Point): desired position to reach\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_ac8579665c0fbf665f734476554fac37d}\label{namespacego__to__point_ac8579665c0fbf665f734476554fac37d}} 
\index{go\_to\_point@{go\_to\_point}!go\_straight\_ahead@{go\_straight\_ahead}}
\index{go\_straight\_ahead@{go\_straight\_ahead}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{go\_straight\_ahead()}{go\_straight\_ahead()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead (\begin{DoxyParamCaption}\item[{}]{des\+\_\+pos }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function to call in case the robot has to go straigth once it is correctly orriented
Set the linear and angular velocity of the robot according to the distance to the target

Args:
    des_pos(Point): desired position to reach\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_a2203d17b7e563bee20ed4c988548df45}\label{namespacego__to__point_a2203d17b7e563bee20ed4c988548df45}} 
\index{go\_to\_point@{go\_to\_point}!go\_to\_point@{go\_to\_point}}
\index{go\_to\_point@{go\_to\_point}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{go\_to\_point()}{go\_to\_point()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point (\begin{DoxyParamCaption}\item[{}]{goal }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function that gets the goal position to reach and, based on that, calls the functions to perform the motion of the robot.
It checks if the goal has't been cancelled; in this case it sets the state_ variable to 3 in order to terminate the process to move 
to reach a certain position.

It also multiplies the linear and angular velocity values sent from the sliders via Velocity custom service message
to the current linear and angular velocity, then publishes the new velocity message to perform the correct motion to reach the goal.

Args:
    goal(Point): the goal to reach

Returns:
     a boolean 'True' value to notify that the function has finished\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_ab92bd6db1ec323a4d795ed6cb40aebe1}\label{namespacego__to__point_ab92bd6db1ec323a4d795ed6cb40aebe1}} 
\index{go\_to\_point@{go\_to\_point}!main@{main}}
\index{main@{main}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb}The main function for this script: it initializes the publisher, the subscribers and the SimpleActionServer, in particular

creates a publisher on topic /cmd_vel to publish the robot's velocity
creates a subscriber on topic /odom to get the current position of the robot
creates a service on topic /set_velocity to get the linear and angular values from the sliders
 creates an action in order to manage the FSM\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_ac688bb56fa84763ea2edefc30cae032a}\label{namespacego__to__point_ac688bb56fa84763ea2edefc30cae032a}} 
\index{go\_to\_point@{go\_to\_point}!normalize\_angle@{normalize\_angle}}
\index{normalize\_angle@{normalize\_angle}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{normalize\_angle()}{normalize\_angle()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+normalize\+\_\+angle (\begin{DoxyParamCaption}\item[{}]{angle }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function for normalizing the angle between -pi and pi.
Args:
    angle(Float): the input angle
Returns:
    angle(Float): the normalized angle.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacego__to__point_abfcc6ba47d138b2b8ee0d51109868803}\label{namespacego__to__point_abfcc6ba47d138b2b8ee0d51109868803}} 
\index{go\_to\_point@{go\_to\_point}!sliderVelocity@{sliderVelocity}}
\index{sliderVelocity@{sliderVelocity}!go\_to\_point@{go\_to\_point}}
\doxysubsubsection{\texorpdfstring{sliderVelocity()}{sliderVelocity()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+slider\+Velocity (\begin{DoxyParamCaption}\item[{}]{vel }\end{DoxyParamCaption})}

\begin{DoxyVerb}Callback to get the linar and angular velocity values sent from the user_interface by Velocity custom service message.
It saves these values in the global variables lin_coef and ang_coef.

Args:
    vel(Velocity): a Velocity custom message\end{DoxyVerb}
 